{"version":3,"file":"getPaginationRowModel.js","sources":["../../../src/utils/getPaginationRowModel.ts"],"sourcesContent":["import { Table, RowModel, Row, RowData } from '../types'\nimport { memo } from '../utils'\nimport { expandRows } from './getExpandedRowModel'\n\nexport function getPaginationRowModel<TData extends RowData>(opts?: {\n  initialSync: boolean\n}): (table: Table<TData>) => () => RowModel<TData> {\n  return table =>\n    memo(\n      () => [\n        table.getState().pagination,\n        table.getPrePaginationRowModel(),\n        table.options.paginateExpandedRows\n          ? undefined\n          : table.getState().expanded,\n      ],\n      (pagination, rowModel) => {\n        if (!rowModel.rows.length) {\n          return rowModel\n        }\n\n        const { pageSize, pageIndex } = pagination\n        let { rows, flatRows, rowsById } = rowModel\n        const pageStart = pageSize * pageIndex\n        const pageEnd = pageStart + pageSize\n\n        rows = rows.slice(pageStart, pageEnd)\n\n        let paginatedRowModel: RowModel<TData>\n\n        if (!table.options.paginateExpandedRows) {\n          paginatedRowModel = expandRows({\n            rows,\n            flatRows,\n            rowsById,\n          })\n        } else {\n          paginatedRowModel = {\n            rows,\n            flatRows,\n            rowsById,\n          }\n        }\n\n        paginatedRowModel.flatRows = []\n\n        const handleRow = (row: Row<TData>) => {\n          paginatedRowModel.flatRows.push(row)\n          if (row.subRows.length) {\n            row.subRows.forEach(handleRow)\n          }\n        }\n\n        paginatedRowModel.rows.forEach(handleRow)\n\n        return paginatedRowModel\n      },\n      {\n        key: process.env.NODE_ENV === 'development' && 'getPaginationRowModel',\n        debug: () => table.options.debugAll ?? table.options.debugTable,\n      }\n    )\n}\n"],"names":["getPaginationRowModel","opts","table","memo","getState","pagination","getPrePaginationRowModel","options","paginateExpandedRows","undefined","expanded","rowModel","rows","length","pageSize","pageIndex","flatRows","rowsById","pageStart","pageEnd","slice","paginatedRowModel","expandRows","handleRow","row","push","subRows","forEach","key","process","env","NODE_ENV","debug","debugAll","debugTable"],"mappings":";;;;;;;;;;;;;;;;;AAIO,SAASA,qBAAT,CAAsDC,IAAtD,EAE4C;AACjD,EAAA,OAAOC,KAAK,IACVC,UAAI,CACF,MAAM,CACJD,KAAK,CAACE,QAAN,EAAA,CAAiBC,UADb,EAEJH,KAAK,CAACI,wBAAN,EAFI,EAGJJ,KAAK,CAACK,OAAN,CAAcC,oBAAd,GACIC,SADJ,GAEIP,KAAK,CAACE,QAAN,EAAiBM,CAAAA,QALjB,CADJ,EAQF,CAACL,UAAD,EAAaM,QAAb,KAA0B;AACxB,IAAA,IAAI,CAACA,QAAQ,CAACC,IAAT,CAAcC,MAAnB,EAA2B;AACzB,MAAA,OAAOF,QAAP,CAAA;AACD,KAAA;;IAED,MAAM;MAAEG,QAAF;AAAYC,MAAAA,SAAAA;AAAZ,KAAA,GAA0BV,UAAhC,CAAA;IACA,IAAI;MAAEO,IAAF;MAAQI,QAAR;AAAkBC,MAAAA,QAAAA;AAAlB,KAAA,GAA+BN,QAAnC,CAAA;AACA,IAAA,MAAMO,SAAS,GAAGJ,QAAQ,GAAGC,SAA7B,CAAA;AACA,IAAA,MAAMI,OAAO,GAAGD,SAAS,GAAGJ,QAA5B,CAAA;IAEAF,IAAI,GAAGA,IAAI,CAACQ,KAAL,CAAWF,SAAX,EAAsBC,OAAtB,CAAP,CAAA;AAEA,IAAA,IAAIE,iBAAJ,CAAA;;AAEA,IAAA,IAAI,CAACnB,KAAK,CAACK,OAAN,CAAcC,oBAAnB,EAAyC;MACvCa,iBAAiB,GAAGC,8BAAU,CAAC;QAC7BV,IAD6B;QAE7BI,QAF6B;AAG7BC,QAAAA,QAAAA;AAH6B,OAAD,CAA9B,CAAA;AAKD,KAND,MAMO;AACLI,MAAAA,iBAAiB,GAAG;QAClBT,IADkB;QAElBI,QAFkB;AAGlBC,QAAAA,QAAAA;OAHF,CAAA;AAKD,KAAA;;IAEDI,iBAAiB,CAACL,QAAlB,GAA6B,EAA7B,CAAA;;IAEA,MAAMO,SAAS,GAAIC,GAAD,IAAqB;AACrCH,MAAAA,iBAAiB,CAACL,QAAlB,CAA2BS,IAA3B,CAAgCD,GAAhC,CAAA,CAAA;;AACA,MAAA,IAAIA,GAAG,CAACE,OAAJ,CAAYb,MAAhB,EAAwB;AACtBW,QAAAA,GAAG,CAACE,OAAJ,CAAYC,OAAZ,CAAoBJ,SAApB,CAAA,CAAA;AACD,OAAA;KAJH,CAAA;;AAOAF,IAAAA,iBAAiB,CAACT,IAAlB,CAAuBe,OAAvB,CAA+BJ,SAA/B,CAAA,CAAA;AAEA,IAAA,OAAOF,iBAAP,CAAA;AACD,GAhDC,EAiDF;IACEO,GAAG,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAAzB,IAA0C,uBADjD;IAEEC,KAAK,EAAE,MAAM9B,KAAK,CAACK,OAAN,CAAc0B,QAAd,IAA0B/B,KAAK,CAACK,OAAN,CAAc2B,UAAAA;AAFvD,GAjDE,CADN,CAAA;AAuDD;;;;"}