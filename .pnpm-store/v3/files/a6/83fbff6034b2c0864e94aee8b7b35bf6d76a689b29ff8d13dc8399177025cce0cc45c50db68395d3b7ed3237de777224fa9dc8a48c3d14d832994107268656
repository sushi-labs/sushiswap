{"version":3,"file":"index.js","sources":["../dist-src/web.js"],"sourcesContent":["const enc = new TextEncoder();\nexport async function sign(secret, data) {\n    const signature = await crypto.subtle.sign(\"HMAC\", await importKey(secret), enc.encode(data));\n    return UInt8ArrayToHex(signature);\n}\nexport async function verify(secret, data, signature) {\n    return await crypto.subtle.verify(\"HMAC\", await importKey(secret), hexToUInt8Array(signature), enc.encode(data));\n}\nfunction hexToUInt8Array(string) {\n    // convert string to pairs of 2 characters\n    const pairs = string.match(/[\\dA-F]{2}/gi);\n    // convert the octets to integers\n    const integers = pairs.map(function (s) {\n        return parseInt(s, 16);\n    });\n    return new Uint8Array(integers);\n}\nfunction UInt8ArrayToHex(signature) {\n    return Array.prototype.map\n        .call(new Uint8Array(signature), (x) => x.toString(16).padStart(2, \"0\"))\n        .join(\"\");\n}\nasync function importKey(secret) {\n    return crypto.subtle.importKey(\"raw\", // raw format of the key - should be Uint8Array\n    enc.encode(secret), {\n        // algorithm details\n        name: \"HMAC\",\n        hash: { name: \"SHA-256\" },\n    }, false, // export = false\n    [\"sign\", \"verify\"] // what this key can do\n    );\n}\n"],"names":[],"mappings":"AAAA,MAAM,GAAG,GAAG,IAAI,WAAW,EAAE,CAAC;AACvB,eAAe,IAAI,CAAC,MAAM,EAAE,IAAI,EAAE;AACzC,IAAI,MAAM,SAAS,GAAG,MAAM,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,MAAM,SAAS,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;AAClG,IAAI,OAAO,eAAe,CAAC,SAAS,CAAC,CAAC;AACtC,CAAC;AACM,eAAe,MAAM,CAAC,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE;AACtD,IAAI,OAAO,MAAM,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,MAAM,SAAS,CAAC,MAAM,CAAC,EAAE,eAAe,CAAC,SAAS,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;AACrH,CAAC;AACD,SAAS,eAAe,CAAC,MAAM,EAAE;AACjC;AACA,IAAI,MAAM,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;AAC/C;AACA,IAAI,MAAM,QAAQ,GAAG,KAAK,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE;AAC5C,QAAQ,OAAO,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;AAC/B,KAAK,CAAC,CAAC;AACP,IAAI,OAAO,IAAI,UAAU,CAAC,QAAQ,CAAC,CAAC;AACpC,CAAC;AACD,SAAS,eAAe,CAAC,SAAS,EAAE;AACpC,IAAI,OAAO,KAAK,CAAC,SAAS,CAAC,GAAG;AAC9B,SAAS,IAAI,CAAC,IAAI,UAAU,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;AAChF,SAAS,IAAI,CAAC,EAAE,CAAC,CAAC;AAClB,CAAC;AACD,eAAe,SAAS,CAAC,MAAM,EAAE;AACjC,IAAI,OAAO,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK;AACxC,IAAI,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE;AACxB;AACA,QAAQ,IAAI,EAAE,MAAM;AACpB,QAAQ,IAAI,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE;AACjC,KAAK,EAAE,KAAK;AACZ,IAAI,CAAC,MAAM,EAAE,QAAQ,CAAC;AACtB,KAAK,CAAC;AACN;;;;"}