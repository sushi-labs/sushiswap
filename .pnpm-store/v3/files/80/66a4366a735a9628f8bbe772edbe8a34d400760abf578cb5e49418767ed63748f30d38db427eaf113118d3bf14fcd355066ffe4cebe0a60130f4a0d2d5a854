{"version":3,"sources":["../../../../build/webpack/plugins/flight-client-entry-plugin.ts"],"names":["PLUGIN_NAME","injectedClientEntries","Map","regexCSS","flightCSSManifest","FlightClientEntryPlugin","constructor","options","dev","isEdgeServer","apply","compiler","hooks","compilation","tap","normalModuleFactory","dependencyFactories","set","webpack","dependencies","ModuleDependency","dependencyTemplates","NullDependency","Template","finishMake","tapPromise","createClientEndpoints","promises","name","entry","entries","entryDependency","request","startsWith","entryModule","moduleGraph","getResolvedModule","forEach","dependency","modRequest","includes","internalClientComponentEntryImports","Set","connection","getOutgoingConnections","layoutOrPageDependency","layoutOrPageRequest","clientComponentImports","cssImports","collectClientComponentsAndCSSForDependency","Object","assign","isAbsoluteRequest","value","add","relativeRequest","path","relative","context","bundlePath","replace","push","injectClientEntryAndSSRModules","entryName","processAssets","stage","Compilation","PROCESS_ASSETS_STAGE_OPTIMIZE_HASH","assets","manifest","JSON","stringify","FLIGHT_SERVER_CSS_MANIFEST","sources","RawSource","res","Promise","all","invalidator","getInvalidator","invalidate","COMPILER_NAMES","client","visitedBySegment","serverCSSImports","filterClientComponents","dependencyToFilter","inClientComponentBoundary","mod","rawRequest","endsWith","APP_DIR_ALIAS","resourceResolveData","has","isCSS","test","isClientComponent","isClientComponentModule","shouldInvalidate","loaderOptions","modules","server","clientLoader","clientSSRLoader","pageKey","type","EntryTypes","CHILD_ENTRY","parentEntries","dispose","lastActiveTime","Date","now","entryData","clientComponentEntryDep","EntryPlugin","createDependency","addEntry","layer","undefined","resolve","reject","get","includeDependencies","call","addModuleTree","contextInfo","issuerLayer","err","module","failedEntry","succeedEntry"],"mappings":"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"}