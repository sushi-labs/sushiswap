{"version":3,"sources":["../../server/image-optimizer.ts"],"names":["getHash","detectContentType","getMaxAge","imageOptimizer","sendResponse","resizeImage","getImageSize","AVIF","WEBP","PNG","JPEG","GIF","SVG","CACHE_VERSION","ANIMATABLE_TYPES","VECTOR_TYPES","BLUR_IMG_SIZE","BLUR_QUALITY","sharp","require","process","env","NEXT_SHARP_PATH","e","showSharpMissingWarning","NODE_ENV","getSupportedMimeType","options","accept","mimeType","mediaType","includes","items","hash","createHash","item","update","String","digest","replace","writeToCacheDir","dir","extension","maxAge","expireAt","buffer","etag","filename","join","promises","rm","force","recursive","catch","rmdir","mkdir","writeFile","every","b","i","ImageOptimizerCache","validateParams","req","query","nextConfig","isDev","imageData","images","deviceSizes","imageSizes","domains","minimumCacheTTL","formats","remotePatterns","url","w","q","href","errorMessage","Array","isArray","isAbsolute","startsWith","hrefParsed","URL","toString","_error","protocol","hasMatch","width","parseInt","isNaN","sizes","push","isValidSize","quality","headers","isStatic","basePath","getCacheKey","constructor","distDir","cacheDir","get","cacheKey","files","readdir","now","Date","file","maxAgeSt","expireAtSt","split","readFile","Number","value","kind","revalidateAfter","Math","max","curRevalidate","isStale","_","set","revalidate","Error","err","console","error","ImageError","statusCode","message","parseCacheControl","str","map","Map","directive","key","trim","toLowerCase","age","endsWith","slice","n","_req","_res","paramsResult","handleRequest","upstreamBuffer","upstreamType","upstreamRes","fetch","ok","status","Buffer","from","arrayBuffer","resBuffers","mockReq","res","mockRes","streamPromise","isStreamFinished","mockRequest","method","connection","nodeUrl","parse","concat","getHeader","dangerouslyAllowSVG","vector","animate","isAnimated","contentType","getExtension","optimizedBuffer","transformer","rotate","metaWidth","metadata","resize","avif","avifQuality","chromaSubsampling","warn","chalk","yellow","bold","webp","png","jpeg","toBuffer","output","orientation","getOrientation","operations","Orientation","RIGHT_TOP","type","numRotations","BOTTOM_RIGHT","LEFT_BOTTOM","processBuffer","meta","getMetadata","opts","blurWidth","blurHeight","height","blurDataURL","unescape","getImageBlurSvg","getFileNameWithExtension","urlWithoutQueryParams","fileNameWithExtension","pop","fileName","setResponseHeaders","xCache","contentSecurityPolicy","setHeader","sendEtagResponse","finished","contentDisposition","getContentType","result","byteLength","end","content","buf","resizeOperationOpts","decodeBuffer","imageSizeOf","Deferred","promise","Promise","resolve","reject"],"mappings":"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"}