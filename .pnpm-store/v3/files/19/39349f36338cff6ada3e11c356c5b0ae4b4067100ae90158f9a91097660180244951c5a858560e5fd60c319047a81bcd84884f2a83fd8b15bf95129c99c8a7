var C=Object.defineProperty,k=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var F=(t,e,r)=>e in t?C(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,p=(t,e)=>{for(var r in e||(e={}))J.call(e,r)&&F(t,r,e[r]);if(w)for(var r of w(e))L.call(e,r)&&F(t,r,e[r]);return t},d=(t,e)=>k(t,D(e));import{useState as j,useRef as m,useCallback as z}from"react";import{useEffect as N,useLayoutEffect as P}from"react";var y=typeof window=="undefined"?N:P;var G=({isPlaying:t,duration:e,startAt:r=0,updateInterval:A=0,onComplete:T,onUpdate:R})=>{let[i,v]=j(r),x=m(r*-1e3),o=m(null),c=m(null),b=m(null),u=m({elapsedTimeRef:0,startAtRef:r,durationRef:e,updateIntervalRef:A});u.current=d(p({},u.current),{durationRef:e,updateIntervalRef:A});let l=s=>{let n=s/1e3;if(c.current===null){c.current=n,o.current=requestAnimationFrame(l);return}let{durationRef:a,elapsedTimeRef:B,updateIntervalRef:E,startAtRef:h}=u.current,M=n-c.current,f=B+M;c.current=n,u.current=d(p({},u.current),{elapsedTimeRef:f});let V=h+(E===0?f:(f/E|0)*E),O=h+f,q=typeof a=="number"&&O>=a;v(q?a:V),q||(o.current=requestAnimationFrame(l))},I=()=>{o.current&&cancelAnimationFrame(o.current),b.current&&clearTimeout(b.current),c.current=null},S=z(s=>{let n=typeof s=="number"?s:r;I(),u.current=d(p({},u.current),{elapsedTimeRef:0,startAtRef:n}),v(n),t&&(o.current=requestAnimationFrame(l))},[t,r]);return y(()=>{if(R==null||R(i),e&&i>=e){x.current+=e*1e3;let{shouldRepeat:s=!1,delay:n=0,newStartAt:a}=(T==null?void 0:T(x.current/1e3))||{};s&&(b.current=setTimeout(()=>S(a),n*1e3))}},[i,e]),y(()=>(t&&(o.current=requestAnimationFrame(l)),I),[t]),{elapsedTime:i,reset:S}};export{G as useElapsedTime};
