{"version":3,"sources":["../../../../server/lib/incremental-cache/index.ts"],"names":["toRoute","pathname","replace","CacheHandler","constructor","_ctx","get","_key","set","_data","IncrementalCache","fs","dev","appDir","flushToDisk","serverDistDir","maxMemoryCacheSize","getPrerenderManifest","incrementalCacheHandlerPath","cacheHandlerMod","FileSystemCache","process","env","NEXT_RUNTIME","require","default","__NEXT_TEST_MAX_ISR_CACHE","parseInt","prerenderManifest","cacheHandler","_appDir","calculateRevalidate","fromTime","Date","getTime","initialRevalidateSeconds","routes","revalidateAfter","_getPathname","normalizePagePath","entry","cacheData","curRevalidate","lastModified","now","isStale","undefined","value","notFoundRoutes","includes","data","revalidateSeconds","dataRoute","path","posix","join","srcRoute","error","console","warn"],"mappings":"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"}