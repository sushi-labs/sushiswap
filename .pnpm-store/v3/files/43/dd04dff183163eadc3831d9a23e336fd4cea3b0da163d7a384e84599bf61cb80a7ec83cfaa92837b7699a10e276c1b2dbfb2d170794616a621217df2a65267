var e=this&&this.__spreadArray||function(e,r){for(var t=0,n=r.length,u=e.length;t<n;t++,u++)e[u]=r[t];return e},r=Object.create,t=Object.defineProperty,n=Object.defineProperties,u=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,s=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,f=function(e,r,n){return r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n},d=function(e,r){for(var t in r||(r={}))a.call(r,t)&&f(e,t,r[t]);if(c)for(var n=0,u=c(r);n<u.length;n++)l.call(r,t=u[n])&&f(e,t,r[t]);return e},p=function(e,r){return n(e,i(r))},v=function(e){return t(e,"__esModule",{value:!0})},y=function(e,r,n){if(r&&"object"==typeof r||"function"==typeof r)for(var i=function(i){a.call(e,i)||"default"===i||t(e,i,{get:function(){return r[i]},enumerable:!(n=u(r,i))||n.enumerable})},c=0,s=o(r);c<s.length;c++)i(s[c]);return e},b=function(e){return y(v(t(null!=e?r(s(e)):{},"default",e&&e.__esModule&&"default"in e?{get:function(){return e.default},enumerable:!0}:{value:e,enumerable:!0})),e)};v(exports),function(e,r){for(var n in r)t(e,n,{get:r[n],enumerable:!0})}(exports,{ApiProvider:function(){return T},createApi:function(){return U},reactHooksModule:function(){return _}});var h=b(require("@reduxjs/toolkit/query")),g=b(require("@reduxjs/toolkit")),m=b(require("react")),q=b(require("@reduxjs/toolkit/query")),O=b(require("react-redux")),S=b(require("react"));function k(e,r,t,n){var u=(0,S.useMemo)((function(){return{queryArgs:e,serialized:"object"==typeof e?r({queryArgs:e,endpointDefinition:t,endpointName:n}):e}}),[e,r,t,n]),i=(0,S.useRef)(u);return(0,S.useEffect)((function(){i.current.serialized!==u.serialized&&(i.current=u)}),[u]),i.current.serialized===u.serialized?i.current.queryArgs:e}var Q=Symbol(),x=b(require("react")),j=b(require("react-redux"));function M(e){var r=(0,x.useRef)(e);return(0,x.useEffect)((function(){(0,j.shallowEqual)(r.current,e)||(r.current=e)}),[e]),(0,j.shallowEqual)(r.current,e)?r.current:e}var E,R,w="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?m.useLayoutEffect:m.useEffect,z=function(e){return e},A=function(e){return e},P=function(e){return e.isUninitialized?p(d({},e),{isUninitialized:!1,isFetching:!0,isLoading:void 0===e.data,status:q.QueryStatus.pending}):e};function C(e){return e.replace(e[0],e[0].toUpperCase())}function D(r){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];Object.assign.apply(Object,e([r],t))}(R=E||(E={})).query="query",R.mutation="mutation";var I=b(require("react-redux")),L=Symbol(),_=function(e){var r=void 0===e?{}:e,t=r.batch,n=void 0===t?I.batch:t,u=r.useDispatch,i=void 0===u?I.useDispatch:u,o=r.useSelector,c=void 0===o?I.useSelector:o,s=r.useStore,a=void 0===s?I.useStore:s,l=r.unstable__sideEffectsInRender,f=void 0!==l&&l;return{name:L,init:function(e,r,t){var u=e,o=function(e){var r=e.api,t=e.moduleOptions,n=t.batch,u=t.useDispatch,i=t.useSelector,o=t.useStore,c=e.serializeQueryArgs,s=e.context,a=t.unstable__sideEffectsInRender?function(e){return e()}:m.useEffect;return{buildQueryHooks:function(e){var t=function(t,n){var o=void 0===n?{}:n,l=o.refetchOnReconnect,f=o.refetchOnFocus,d=o.refetchOnMountOrArgChange,p=o.skip,v=void 0!==p&&p,y=o.pollingInterval,b=void 0===y?0:y,h=r.endpoints[e].initiate,g=u(),O=k(v?q.skipToken:t,c,s.endpointDefinitions[e],e),S=M({refetchOnReconnect:l,refetchOnFocus:f,pollingInterval:b}),Q=(0,m.useRef)(),x=Q.current||{},j=x.queryCacheKey,E=x.requestId,R=i((function(e){var t;return!!j&&!!E&&!(null==(t=e[r.reducerPath].subscriptions[j])?void 0:t[E])}));return a((function(){Q.current=void 0}),[R]),a((function(){var e,r=Q.current;if(O===q.skipToken)return null==r||r.unsubscribe(),void(Q.current=void 0);var t=null==(e=Q.current)?void 0:e.subscriptionOptions;if(r&&r.arg===O)S!==t&&r.updateSubscriptionOptions(S);else{null==r||r.unsubscribe();var n=g(h(O,{subscriptionOptions:S,forceRefetch:d}));Q.current=n}}),[g,h,d,O,S,R]),(0,m.useEffect)((function(){return function(){var e;null==(e=Q.current)||e.unsubscribe(),Q.current=void 0}}),[]),(0,m.useMemo)((function(){return{refetch:function(){var e;null==(e=Q.current)||e.refetch()}}}),[])},f=function(t){var i=void 0===t?{}:t,o=i.refetchOnReconnect,c=i.refetchOnFocus,s=i.pollingInterval,l=void 0===s?0:s,f=r.endpoints[e].initiate,d=u(),p=(0,m.useState)(Q),v=p[0],y=p[1],b=(0,m.useRef)(),h=M({refetchOnReconnect:o,refetchOnFocus:c,pollingInterval:l});a((function(){var e,r,t=null==(e=b.current)?void 0:e.subscriptionOptions;h!==t&&(null==(r=b.current)||r.updateSubscriptionOptions(h))}),[h]);var g=(0,m.useRef)(h);a((function(){g.current=h}),[h]);var q=(0,m.useCallback)((function(e,r){var t;return void 0===r&&(r=!1),n((function(){var n;null==(n=b.current)||n.unsubscribe(),b.current=t=d(f(e,{subscriptionOptions:g.current,forceRefetch:!r})),y(e)})),t}),[d,f]);return(0,m.useEffect)((function(){return function(){var e;null==(e=null==b?void 0:b.current)||e.unsubscribe()}}),[]),(0,m.useEffect)((function(){v===Q||b.current||q(v,!0)}),[v,q]),(0,m.useMemo)((function(){return[q,v]}),[q,v])},v=function(t,n){var u=void 0===n?{}:n,a=u.skip,f=u.selectFromResult,d=void 0===f?z:f,p=r.endpoints[e].select,v=k(void 0!==a&&a?q.skipToken:t,c,s.endpointDefinitions[e],e),y=(0,m.useRef)(),b=(0,m.useMemo)((function(){return(0,g.createSelector)([p(v),function(e,r){return r},function(e){return v}],l)}),[p,v]),h=(0,m.useMemo)((function(){return(0,g.createSelector)([b],d)}),[b,d]),S=i((function(e){return h(e,y.current)}),O.shallowEqual),Q=o(),x=b(Q.getState(),y.current);return w((function(){y.current=x}),[x]),S};return{useQueryState:v,useQuerySubscription:t,useLazyQuerySubscription:f,useLazyQuery:function(e){var r=f(e),t=r[0],n=r[1],u=v(n,p(d({},e),{skip:n===Q})),i=(0,m.useMemo)((function(){return{lastArg:n}}),[n]);return(0,m.useMemo)((function(){return[t,u,i]}),[t,u,i])},useQuery:function(e,r){var n=t(e,r),u=v(e,d({selectFromResult:e===q.skipToken||(null==r?void 0:r.skip)?void 0:P},r));return(0,m.useMemo)((function(){return d(d({},u),n)}),[u,n])}}},buildMutationHook:function(e){return function(t){var o=void 0===t?{}:t,c=o.selectFromResult,s=void 0===c?A:c,a=o.fixedCacheKey,l=r.endpoints[e],f=l.select,v=l.initiate,y=u(),b=(0,m.useState)(),h=b[0],q=b[1];(0,m.useEffect)((function(){return function(){(null==h?void 0:h.arg.fixedCacheKey)||null==h||h.reset()}}),[h]);var S=(0,m.useCallback)((function(e){var r=y(v(e,{fixedCacheKey:a}));return q(r),r}),[y,v,a]),k=(h||{}).requestId,Q=(0,m.useMemo)((function(){return(0,g.createSelector)([f({fixedCacheKey:a,requestId:null==h?void 0:h.requestId})],s)}),[f,h,s,a]),x=i(Q,O.shallowEqual),j=null==a?null==h?void 0:h.arg.originalArgs:void 0,M=(0,m.useCallback)((function(){n((function(){h&&q(void 0),a&&y(r.internalActions.removeMutationResult({requestId:k,fixedCacheKey:a}))}))}),[y,a,h,k]),E=(0,m.useMemo)((function(){return p(d({},x),{originalArgs:j,reset:M})}),[x,j,M]);return(0,m.useMemo)((function(){return[S,E]}),[S,E])}},usePrefetch:function(e,t){var n=u(),i=M(t);return(0,m.useCallback)((function(t,u){return n(r.util.prefetch(e,t,d(d({},i),u)))}),[e,n,i])}};function l(e,r,t){if((null==r?void 0:r.endpointName)&&e.isUninitialized){var n=r.endpointName,u=s.endpointDefinitions[n];c({queryArgs:r.originalArgs,endpointDefinition:u,endpointName:n})===c({queryArgs:t,endpointDefinition:u,endpointName:n})&&(r=void 0)}var i=e.isSuccess?e.data:null==r?void 0:r.data;void 0===i&&(i=e.data);var o=void 0!==i,a=e.isLoading,l=!o&&a,f=e.isSuccess||a&&o;return p(d({},e),{data:i,currentData:e.data,isFetching:a,isLoading:l,isSuccess:f})}}({api:e,moduleOptions:{batch:n,useDispatch:i,useSelector:c,useStore:a,unstable__sideEffectsInRender:f},serializeQueryArgs:r.serializeQueryArgs,context:t}),s=o.buildQueryHooks,l=o.buildMutationHook;return D(u,{usePrefetch:o.usePrefetch}),D(t,{batch:n}),{injectEndpoint:function(r,t){if(t.type===E.query){var n=s(r),i=n.useQuery,o=n.useLazyQuery;D(u.endpoints[r],{useQuery:i,useLazyQuery:o,useLazyQuerySubscription:n.useLazyQuerySubscription,useQueryState:n.useQueryState,useQuerySubscription:n.useQuerySubscription}),e["use"+C(r)+"Query"]=i,e["useLazy"+C(r)+"Query"]=o}else if(t.type===E.mutation){var c=l(r);D(u.endpoints[r],{useMutation:c}),e["use"+C(r)+"Mutation"]=c}}}}}};y(exports,b(require("@reduxjs/toolkit/query")));var F=b(require("@reduxjs/toolkit")),K=b(require("react")),N=b(require("react-redux")),H=b(require("@reduxjs/toolkit/query"));function T(e){var r=K.default.useState((function(){var r;return(0,F.configureStore)({reducer:(r={},r[e.api.reducerPath]=e.api.reducer,r),middleware:function(r){return r().concat(e.api.middleware)}})}))[0];return(0,H.setupListeners)(r.dispatch,e.setupListeners),K.default.createElement(N.Provider,{store:r,context:e.context},e.children)}var U=(0,h.buildCreateApi)((0,h.coreModule)(),_());
//# sourceMappingURL=rtk-query-react.cjs.production.min.js.map