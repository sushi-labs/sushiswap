{"version":3,"sources":["../../../server/response-cache/web.ts"],"names":["WebResponseCache","constructor","minimalMode","pendingResponses","Map","get","key","responseGenerator","context","pendingResponseKey","isManualRevalidate","pendingResponse","resolver","rejecter","promise","Promise","resolve","reject","set","resolved","cacheEntry","previousCacheItem","expiresAt","Date","now","entry","delete","resolveValue","isMiss","revalidate","undefined","err","console","error"],"mappings":"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"}