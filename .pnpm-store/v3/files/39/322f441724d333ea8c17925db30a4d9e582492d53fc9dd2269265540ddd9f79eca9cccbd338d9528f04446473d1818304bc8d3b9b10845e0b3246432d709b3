import*as t from"fp-ts/Either";import{pipe as n,not as r,flow as e,absurd as o,identity as u}from"fp-ts/function";import{toNestError as a,validateFieldsNatively as i}from"@hookform/resolvers";import{TaggedUnionType as f,UnionType as s,IntersectionType as c}from"io-ts";import*as p from"fp-ts/ReadonlyArray";import*as m from"fp-ts/Option";import*as l from"fp-ts/Semigroup";import*as y from"fp-ts/ReadonlyRecord";function d(){return(d=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])}return t}).apply(this,arguments)}var g=function(r){return r.reduce(function(r,e,o){return n(e,t.fold(function(t){return(o>0?".":"")+t},function(t){return"["+t+"]"}),function(t){return""+r+t})},"")},v=["path"],h=function(a){var i,l=n(i=a.context,p.filterMapWithIndex(function(t,n){var r=t-1;return void 0===i[r]||i[r].type instanceof f||i[r].type instanceof s||i[r].type instanceof c?m.none:m.some(n)}),p.map(function(t){return t.key}),p.map(function(e){return n(e,function(t){return parseInt(t,10)},t.fromPredicate(r(Number.isNaN),function(){return e}))}),p.toArray,g);return{message:n(a.message,t.fromNullable(a.context),t.mapLeft(e(p.last,m.map(function(t){return"expected "+t.type.name+" but got "+JSON.stringify(t.actual)}),m.getOrElseW(function(){return o("Error context is missing name")}))),t.getOrElseW(u)),type:n(a.context,p.last,m.map(function(t){return t.type.name}),m.getOrElse(function(){return"unknown"})),path:l}},O=function(t){return n(t,p.map(function(t){var n;return(n={})[t.path]={type:t.type,message:t.message},n}),function(t){return l.fold({concat:function(t,n){return Object.assign({},n,t)}})({},t)})},b={concat:function(t,n){var r;return d({},n,{types:d({},t.types,(r={},r[t.type]=t.message,r[n.type]=n.message,r))})}},x=function(t){return n(y.fromFoldableMap(b,p.Foldable)(t,function(t){return[t.path,t]}),y.map(function(t){return function(t,n){if(null==t)return{};var r,e,o={},u=Object.keys(t);for(e=0;e<u.length;e++)n.indexOf(r=u[e])>=0||(o[r]=t[r]);return o}(t,v)}))},N=function(r){return function(e,o,u){return n(e,r.decode,t.mapLeft((f=!u.shouldUseNativeValidation&&"all"===u.criteriaMode,function(t){var r=f?x:O;return n(t,p.map(h),r)})),t.mapLeft(function(t){return a(t,u)}),t.fold(function(t){return{values:{},errors:t}},function(t){return u.shouldUseNativeValidation&&i({},u),{values:t,errors:{}}}));var f}};export{N as ioTsResolver};
//# sourceMappingURL=io-ts.module.js.map
