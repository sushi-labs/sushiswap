{"version":3,"file":"use-scroll-position.js","sources":["../../node_modules/@react-hook/throttle/src/index.tsx","../../node_modules/@react-hook/event/src/index.tsx","../../node_modules/@react-hook/latest/src/index.tsx","../../node_modules/@react-hook/passive-layout-effect/src/index.tsx","../../src/index.tsx"],"sourcesContent":["import * as React from 'react'\nimport useLatest from '@react-hook/latest'\n\nconst perf = typeof performance !== 'undefined' ? performance : Date\nconst now = () => perf.now()\n\nexport function useThrottleCallback<CallbackArguments extends any[]>(\n  callback: (...args: CallbackArguments) => void,\n  fps = 30,\n  leading = false\n): (...args: CallbackArguments) => void {\n  const storedCallback = useLatest(callback)\n  const ms = 1000 / fps\n  const prev = React.useRef(0)\n  const trailingTimeout = React.useRef<ReturnType<typeof setTimeout>>()\n  const clearTrailing = () =>\n    trailingTimeout.current && clearTimeout(trailingTimeout.current)\n  const deps = [fps, leading, storedCallback]\n\n  // Reset any time the deps change\n  React.useEffect(\n    () => () => {\n      prev.current = 0\n      clearTrailing()\n    },\n    deps\n  )\n\n  return React.useCallback(function () {\n    // eslint-disable-next-line prefer-rest-params\n    const args = arguments\n    const rightNow = now()\n    const call = () => {\n      prev.current = rightNow\n      clearTrailing()\n      storedCallback.current.apply(null, args as any)\n    }\n    const current = prev.current\n    // leading\n    if (leading && current === 0) return call()\n    // body\n    if (rightNow - current > ms) {\n      if (current > 0) return call()\n      prev.current = rightNow\n    }\n    // trailing\n    clearTrailing()\n    trailingTimeout.current = setTimeout(() => {\n      call()\n      prev.current = 0\n    }, ms)\n  }, deps)\n}\n\nexport function useThrottle<State>(\n  initialState: State | (() => State),\n  fps?: number,\n  leading?: boolean\n): [State, React.Dispatch<React.SetStateAction<State>>] {\n  const state = React.useState<State>(initialState)\n  return [state[0], useThrottleCallback(state[1], fps, leading)]\n}\n","import * as React from 'react'\nimport useLayoutEffect from '@react-hook/passive-layout-effect'\nimport useLatest from '@react-hook/latest'\n\nfunction useEvent<\n  T extends Window = Window,\n  K extends keyof WindowEventMap = keyof WindowEventMap\n>(\n  target: Window | null,\n  type: K,\n  listener: WindowEventListener<K>,\n  cleanup?: (...args: any[]) => void\n): void\nfunction useEvent<\n  T extends Document = Document,\n  K extends keyof DocumentEventMap = keyof DocumentEventMap\n>(\n  target: Document | null,\n  type: K,\n  listener: DocumentEventListener<K>,\n  cleanup?: (...args: any[]) => void\n): void\nfunction useEvent<\n  T extends HTMLElement = HTMLElement,\n  K extends keyof HTMLElementEventMap = keyof HTMLElementEventMap\n>(\n  target: React.RefObject<T> | T | null,\n  type: K,\n  listener: ElementEventListener<K>,\n  cleanup?: (...args: any[]) => void\n): void\nfunction useEvent(\n  target: any,\n  type: any,\n  listener: any,\n  cleanup: any = noop\n): void {\n  const storedListener = useLatest(listener)\n  const storedCleanup = useLatest(cleanup)\n\n  useLayoutEffect(() => {\n    const targetEl = target && 'current' in target ? target.current : target\n    if (!targetEl) return\n\n    const listener = function (this: any, ...args: any[]) {\n      storedListener.current.apply(this, args)\n    }\n\n    targetEl.addEventListener(type, listener)\n    const cleanup = storedCleanup.current\n\n    return () => {\n      targetEl.removeEventListener(type, listener)\n      cleanup()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [target, type])\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nfunction noop() {}\n\nexport type ElementEventListener<\n  K extends keyof HTMLElementEventMap = keyof HTMLElementEventMap\n> = (this: HTMLElement, ev: HTMLElementEventMap[K]) => any\n\nexport type DocumentEventListener<\n  K extends keyof DocumentEventMap = keyof DocumentEventMap\n> = (this: Document, ev: DocumentEventMap[K]) => any\n\nexport type WindowEventListener<\n  K extends keyof WindowEventMap = keyof WindowEventMap\n> = (this: Document, ev: WindowEventMap[K]) => any\n\nexport default useEvent\n","import * as React from 'react'\n\nconst useLatest = <T extends any>(current: T) => {\n  const storedValue = React.useRef(current)\n  storedValue.current = current\n  return storedValue\n}\n\nexport default useLatest\n","import * as React from 'react'\n\nconst usePassiveLayoutEffect =\n  React[\n    typeof document !== 'undefined' && document.createElement !== void 0\n      ? 'useLayoutEffect'\n      : 'useEffect'\n  ]\n\nexport default usePassiveLayoutEffect\n","import {useThrottle} from '@react-hook/throttle'\nimport useEvent from '@react-hook/event'\n\nconst win = typeof window === 'undefined' ? null : window\nconst getScrollY = (): number =>\n  (win as Window).scrollY !== void 0\n    ? (win as Window).scrollY\n    : (win as Window).pageYOffset === void 0\n    ? 0\n    : (win as Window).pageYOffset\n\nexport const useWindowScroll = (fps = 30): number => {\n  const state = useThrottle(\n    typeof window === 'undefined' ? 0 : getScrollY,\n    fps,\n    true\n  )\n  useEvent(win, 'scroll', (): void => state[1](getScrollY()))\n  return state[0]\n}\n\nexport default useWindowScroll\n"],"names":["useThrottleCallback","callback","fps","leading","prev","current","clearTrailing","storedCallback","useLatest","ms","React","trailingTimeout","clearTimeout","deps","args","arguments","rightNow","now","call","apply","setTimeout","noop","storedValue","perf","performance","Date","usePassiveLayoutEffect","document","createElement","win","window","getScrollY","scrollY","pageYOffset","useWindowScroll","state","initialState","useThrottle","target","type","listener","cleanup","storedListener","this","storedCleanup","useLayoutEffect","targetEl","addEventListener","removeEventListener","useEvent"],"mappings":"kPAMO,SAASA,EACdC,EACAC,EACAC,gBAaIC,EAAKC,QAAU,EACfC,aAfJJ,IAAAA,EAAM,aACNC,IAAAA,EAAU,OAEJI,EAAiBC,EAAUP,GAC3BQ,EAAK,IAAOP,EACZE,EAAOM,SAAa,GACpBC,EAAkBD,WAClBJ,EAAgB,kBACpBK,EAAgBN,SAAWO,aAAaD,EAAgBN,UACpDQ,EAAO,CAACX,EAAKC,EAASI,UAG5BG,aACE,sBAIAG,GAGKH,eAAkB,eAEjBI,EAAOC,UACPC,EAAWC,IACXC,EAAO,WACXd,EAAKC,QAAUW,EACfV,IACAC,EAAeF,QAAQc,MAAM,KAAML,IAE/BT,EAAUD,EAAKC,WAEjBF,GAAuB,IAAZE,EAAe,OAAOa,OAEjCF,EAAWX,EAAUI,EAAI,IACvBJ,EAAU,EAAG,OAAOa,IACxBd,EAAKC,QAAUW,EAGjBV,IACAK,EAAgBN,QAAUe,YAAW,WACnCF,IACAd,EAAKC,QAAU,IACdI,KACFI,GCSL,SAASQ,KC1DT,IAAMb,EAAY,SAAgBH,OAC1BiB,EAAcZ,SAAaL,UACjCiB,EAAYjB,QAAUA,EACfiB,GFFHC,EAA8B,oBAAhBC,YAA8BA,YAAcC,KAC1DR,EAAM,kBAAMM,EAAKN,OGFjBS,EACJhB,EACsB,oBAAbiB,eAAuD,IAA3BA,SAASC,cACxC,kBACA,aCHFC,EAAwB,oBAAXC,OAAyB,KAAOA,OAC7CC,EAAa,uBACW,IAA3BF,EAAeG,QACXH,EAAeG,aACgB,IAA/BH,EAAeI,YAChB,EACCJ,EAAeI,aAETC,EAAkB,SAAChC,YAAAA,IAAAA,EAAM,QAC9BiC,EJ0CD,SACLC,EACAlC,OAGMiC,EAAQzB,WAAsB0B,SAC7B,CAACD,EAAM,GAAInC,EAAoBmC,EAAM,GAAIjC,EI7C9C,IAHYmC,CACM,oBAAXP,OAAyB,EAAIC,EACpC7B,UHiBJ,SACEoC,EACAC,EACAC,EACAC,2CAS2C3B,2BAAAA,kBACvC4B,EAAerC,QAAQc,MAAMwB,KAAM7B,YAVvC2B,IAAAA,EAAepB,OAETqB,EAAiBlC,GGpBC,kBAAY2B,EAAM,GAAGJ,QHqBvCa,EAAgBpC,EAAUiC,GAEhCI,GAAgB,eACRC,EAAWR,GAAU,YAAaA,EAASA,EAAOjC,QAAUiC,KAC7DQ,OAECN,IAINM,EAASC,iBG/BG,SH+BoBP,OAC1BC,EAAUG,EAAcvC,eAEvB,WACLyC,EAASE,oBGnCC,SHmCyBR,GACnCC,QAGD,CAACH,EGvCU,WAAdW,CAASpB,GACFM,EAAM"}