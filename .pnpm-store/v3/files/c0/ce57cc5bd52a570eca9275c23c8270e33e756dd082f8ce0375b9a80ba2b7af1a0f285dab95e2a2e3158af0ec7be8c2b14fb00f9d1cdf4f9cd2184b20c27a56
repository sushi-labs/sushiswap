var e,t,n=Object.defineProperty,r=Object.defineProperties,i=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,c=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&u(e,n,t[n]);if(a)for(var n of a(t))s.call(t,n)&&u(e,n,t[n]);return e},d=(e,t)=>r(e,i(t)),l=(e,t)=>{var n={};for(var r in e)o.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&a)for(var r of a(e))t.indexOf(r)<0&&s.call(e,r)&&(n[r]=e[r]);return n};(t=e||(e={})).uninitialized="uninitialized",t.pending="pending",t.fulfilled="fulfilled",t.rejected="rejected";var f=e=>[].concat(...e);import{isPlainObject as p}from"@reduxjs/toolkit";var m=p;function y(e,t){if(e===t||!(m(e)&&m(t)||Array.isArray(e)&&Array.isArray(t)))return t;const n=Object.keys(t),r=Object.keys(e);let i=n.length===r.length;const a=Array.isArray(t)?[]:{};for(const r of n)a[r]=y(e[r],t[r]),i&&(i=e[r]===a[r]);return i?e:a}import{isPlainObject as h}from"@reduxjs/toolkit";var g=(...e)=>fetch(...e),v=e=>e.status>=200&&e.status<=299,b=async(e,t)=>{if("function"==typeof t)return t(e);if("text"===t)return e.text();if("json"===t){const t=await e.text();return t.length?JSON.parse(t):null}};function q(e){if(!h(e))return e;const t=c({},e);for(const[e,n]of Object.entries(t))void 0===n&&delete t[e];return t}function O(e={}){var t=e,{baseUrl:n,prepareHeaders:r=(e=>e),fetchFn:i=g,paramsSerializer:a}=t,o=l(t,["baseUrl","prepareHeaders","fetchFn","paramsSerializer"]);return"undefined"==typeof fetch&&i===g&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(e,t)=>{const{signal:s,getState:u,extra:f,endpoint:p,forced:m,type:y}=t;let g,O="string"==typeof e?{url:e}:e,{url:j,method:w="GET",headers:R=new Headers({}),body:S,params:A,responseHandler:T="json",validateStatus:x=v}=O,k=l(O,["url","method","headers","body","params","responseHandler","validateStatus"]),C=c(d(c({},o),{method:w,signal:s,body:S}),k);C.headers=await r(new Headers(q(R)),{getState:u,extra:f,endpoint:p,forced:m,type:y});const I=e=>"object"==typeof e&&(h(e)||Array.isArray(e)||"function"==typeof e.toJSON);if(!C.headers.has("content-type")&&I(S)&&C.headers.set("content-type","application/json"),I(S)&&(e=>{var t,n;return null==(n=null==(t=e.get("content-type"))?void 0:t.trim())?void 0:n.startsWith("application/json")})(C.headers)&&(C.body=JSON.stringify(S)),A){const e=~j.indexOf("?")?"&":"?";j+=e+(a?a(A):new URLSearchParams(q(A)))}j=function(e,t){return e?t?function(e){return new RegExp("(^|:)//").test(e)}(t)?t:(e=(e=>e.replace(/\/$/,""))(e),`${e}/${t=(e=>e.replace(/^\//,""))(t)}`):e:t}(n,j);const P=new Request(j,C);let Q;g={request:P.clone()};try{Q=await i(P)}catch(e){return{error:{status:"FETCH_ERROR",error:String(e)},meta:g}}const D=Q.clone();let N;g.response=D;let K="";try{let e;if(await Promise.all([b(Q,T).then((e=>N=e),(t=>e=t)),D.text().then((e=>K=e),(()=>{}))]),e)throw e}catch(e){return{error:{status:"PARSING_ERROR",originalStatus:Q.status,data:K,error:String(e)},meta:g}}return x(Q,N)?{data:N,meta:g}:{error:{status:Q.status,data:N},meta:g}}}var j=class{constructor(e,t){this.value=e,this.meta=t}};async function w(e=0,t=5){const n=Math.min(e,t),r=~~((Math.random()+.4)*(300<<n));await new Promise((e=>setTimeout((t=>e(t)),r)))}var R=Object.assign(((e,t)=>async(n,r,i)=>{const a=c(c({maxRetries:5,backoff:w},t),i);let o=0;for(;;)try{const t=await e(n,r,i);if(t.error)throw new j(t);return t}catch(e){if(o++,e.throwImmediately||o>a.maxRetries){if(e instanceof j)return e.value;throw e}await a.backoff(o,a.maxRetries)}}),{fail:function(e){throw Object.assign(new j({error:e}),{throwImmediately:!0})}});import{createAction as S}from"@reduxjs/toolkit";var A,T,x=S("__rtkq/focused"),k=S("__rtkq/unfocused"),C=S("__rtkq/online"),I=S("__rtkq/offline"),P=!1;function Q(e,t){return t?t(e,{onFocus:x,onFocusLost:k,onOffline:I,onOnline:C}):function(){const t=()=>e(x()),n=()=>e(C()),r=()=>e(I()),i=()=>{"visible"===window.document.visibilityState?t():e(k())};return P||"undefined"!=typeof window&&window.addEventListener&&(window.addEventListener("visibilitychange",i,!1),window.addEventListener("focus",t,!1),window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),P=!0),()=>{window.removeEventListener("focus",t),window.removeEventListener("visibilitychange",i),window.removeEventListener("online",n),window.removeEventListener("offline",r),P=!1}}()}import{createNextState as D,createSelector as N}from"@reduxjs/toolkit";function K(e,t,n,r,i,a){return"function"==typeof e?e(t,n,r,i).map(E).map(a):Array.isArray(e)?e.map(E).map(a):[]}function E(e){return"string"==typeof e?{type:e}:e}(T=A||(A={})).query="query",T.mutation="mutation";import{combineReducers as M,createAction as F,createSlice as z,isAnyOf as _,isFulfilled as L,isRejectedWithValue as $}from"@reduxjs/toolkit";import{isAllOf as U,isFulfilled as W,isPending as H,isRejected as B,isRejectedWithValue as V}from"@reduxjs/toolkit";import{isDraftable as J,produceWithPatches as G}from"immer";import{createAsyncThunk as Y}from"@reduxjs/toolkit";function X(e){return e}function Z(e,t,n,r){return K(n[e.meta.arg.endpointName][t],W(e)?e.payload:void 0,V(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,r)}import{applyPatches as ee}from"immer";function te(e,t,n){const r=e[t];r&&n(r)}function ne(e){var t;return null!=(t="arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)?t:e.requestId}function re(e,t,n){const r=e[ne(t)];r&&n(r)}var ie={},ae=Symbol.for("RTKQ/skipToken"),oe=ae,se={status:e.uninitialized},ue=D(se,(()=>{})),ce=D(se,(()=>{}));import{isPlainObject as de}from"@reduxjs/toolkit";var le=({endpointName:e,queryArgs:t})=>`${e}(${JSON.stringify(t,((e,t)=>de(t)?Object.keys(t).sort().reduce(((e,n)=>(e[n]=t[n],e)),{}):t))})`;import{nanoid as fe}from"@reduxjs/toolkit";import{defaultMemoize as pe}from"reselect";function me(...e){return function(t){const n=pe((e=>{var n,r;return null==(r=t.extractRehydrationInfo)?void 0:r.call(t,e,{reducerPath:null!=(n=t.reducerPath)?n:"api"})})),r=d(c({reducerPath:"api",serializeQueryArgs:le,keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1},t),{extractRehydrationInfo:n,tagTypes:[...t.tagTypes||[]]}),i={endpointDefinitions:{},batch(e){e()},apiUid:fe(),extractRehydrationInfo:n,hasRehydrationInfo:pe((e=>null!=n(e)))},a={injectEndpoints:function(e){const t=e.endpoints({query:e=>d(c({},e),{type:A.query}),mutation:e=>d(c({},e),{type:A.mutation})});for(const[n,r]of Object.entries(t))if(e.overrideExisting||!(n in i.endpointDefinitions)){i.endpointDefinitions[n]=r;for(const e of o)e.injectEndpoint(n,r)}return a},enhanceEndpoints({addTagTypes:e,endpoints:t}){if(e)for(const t of e)r.tagTypes.includes(t)||r.tagTypes.push(t);if(t)for(const[e,n]of Object.entries(t))"function"==typeof n?n(i.endpointDefinitions[e]):Object.assign(i.endpointDefinitions[e]||{},n);return a}},o=e.map((e=>e.init(a,r,i)));return a.injectEndpoints({endpoints:t.endpoints})}}function ye(){return function(){throw new Error("When using `fakeBaseQuery`, all queries & mutations must use the `queryFn` definition syntax.")}}import{compose as he}from"redux";import{createAction as ge}from"@reduxjs/toolkit";var ve=({reducerPath:e,api:t,context:n})=>{const{removeQueryResult:r,unsubscribeQueryResult:i}=t.internalActions;return a=>{const o={};return r=>u=>{var c;const d=r(u);if(i.match(u)){const t=a.getState()[e],{queryCacheKey:n}=u.payload;s(n,null==(c=t.queries[n])?void 0:c.endpointName,a,t.config)}if(t.util.resetApiState.match(u))for(const[e,t]of Object.entries(o))t&&clearTimeout(t),delete o[e];if(n.hasRehydrationInfo(u)){const t=a.getState()[e],{queries:r}=n.extractRehydrationInfo(u);for(const[e,n]of Object.entries(r))s(e,null==n?void 0:n.endpointName,a,t.config)}return d};function s(t,i,a,s){var u;const c=n.endpointDefinitions[i],d=null!=(u=null==c?void 0:c.keepUnusedDataFor)?u:s.keepUnusedDataFor,l=o[t];l&&clearTimeout(l),o[t]=setTimeout((()=>{const n=a.getState()[e].subscriptions[t];n&&0!==Object.keys(n).length||a.dispatch(r({queryCacheKey:t})),delete o[t]}),1e3*d)}}};import{isAnyOf as be,isFulfilled as qe,isRejectedWithValue as Oe}from"@reduxjs/toolkit";var je=({reducerPath:t,context:n,context:{endpointDefinitions:r},mutationThunk:i,api:a,assertTagType:o,refetchQuery:s})=>{const{removeQueryResult:u}=a.internalActions;return e=>t=>n=>{const s=t(n);return be(qe(i),Oe(i))(n)&&c(Z(n,"invalidatesTags",r,o),e),a.util.invalidateTags.match(n)&&c(K(n.payload,void 0,void 0,void 0,void 0,o),e),s};function c(r,i){const o=i.getState(),c=o[t],d=a.util.selectInvalidatedBy(o,r);n.batch((()=>{const t=Array.from(d.values());for(const{queryCacheKey:n}of t){const t=c.queries[n],r=c.subscriptions[n];t&&r&&(0===Object.keys(r).length?i.dispatch(u({queryCacheKey:n})):t.status!==e.uninitialized&&i.dispatch(s(t,n)))}}))}},we=({reducerPath:t,queryThunk:n,api:r,refetchQuery:i})=>{return o=>{const s={};return e=>t=>{const i=e(t);return(r.internalActions.updateSubscriptionOptions.match(t)||r.internalActions.unsubscribeQueryResult.match(t))&&c(t.payload,o),(n.pending.match(t)||n.rejected.match(t)&&t.meta.condition)&&c(t.meta.arg,o),(n.fulfilled.match(t)||n.rejected.match(t)&&!t.meta.condition)&&u(t.meta.arg,o),r.util.resetApiState.match(t)&&function(){for(const e of Object.keys(s))d(e)}(),i};function u({queryCacheKey:n},r){const o=r.getState()[t],u=o.queries[n];if(!u||u.status===e.uninitialized)return;const c=a(o.subscriptions[n]);if(!Number.isFinite(c))return;const d=s[n];(null==d?void 0:d.timeout)&&(clearTimeout(d.timeout),d.timeout=void 0);const l=Date.now()+c,f=s[n]={nextPollTimestamp:l,pollingInterval:c,timeout:setTimeout((()=>{f.timeout=void 0,r.dispatch(i(u,n))}),c)}}function c({queryCacheKey:n},r){const i=r.getState()[t],o=i.queries[n];if(!o||o.status===e.uninitialized)return;const c=a(i.subscriptions[n]);if(!Number.isFinite(c))return void d(n);const l=s[n],f=Date.now()+c;(!l||f<l.nextPollTimestamp)&&u({queryCacheKey:n},r)}function d(e){const t=s[e];(null==t?void 0:t.timeout)&&clearTimeout(t.timeout),delete s[e]}};function a(e={}){let t=Number.POSITIVE_INFINITY;for(const n of Object.values(e))n.pollingInterval&&(t=Math.min(n.pollingInterval,t));return t}},Re=({reducerPath:t,context:n,api:r,refetchQuery:i})=>{const{removeQueryResult:a}=r.internalActions;return e=>t=>n=>{const r=t(n);return x.match(n)&&o(e,"refetchOnFocus"),C.match(n)&&o(e,"refetchOnReconnect"),r};function o(r,o){const s=r.getState()[t],u=s.queries,c=s.subscriptions;n.batch((()=>{for(const t of Object.keys(c)){const n=u[t],d=c[t];d&&n&&(Object.values(d).some((e=>!0===e[o]))||Object.values(d).every((e=>void 0===e[o]))&&s.config[o])&&(0===Object.keys(d).length?r.dispatch(a({queryCacheKey:t})):n.status!==e.uninitialized&&r.dispatch(i(n,t)))}}))}};import{isAsyncThunkAction as Se,isFulfilled as Ae}from"@reduxjs/toolkit";var Te=new Error("Promise never resolved before cacheEntryRemoved."),xe=({api:e,reducerPath:t,context:n,queryThunk:r,mutationThunk:i})=>{const a=Se(r),o=Se(i),s=Ae(r,i);return u=>{const l={};return n=>c=>{const d=u.getState(),p=n(c),m=function(t){return a(t)?t.meta.arg.queryCacheKey:o(t)?t.meta.requestId:e.internalActions.removeQueryResult.match(t)?t.payload.queryCacheKey:e.internalActions.removeMutationResult.match(t)?ne(t.payload):""}(c);if(r.pending.match(c)){const e=d[t].queries[m],n=u.getState()[t].queries[m];!e&&n&&f(c.meta.arg.endpointName,c.meta.arg.originalArgs,m,u,c.meta.requestId)}else if(i.pending.match(c))u.getState()[t].mutations[m]&&f(c.meta.arg.endpointName,c.meta.arg.originalArgs,m,u,c.meta.requestId);else if(s(c)){const e=l[m];(null==e?void 0:e.valueResolved)&&(e.valueResolved({data:c.payload,meta:c.meta.baseQueryMeta}),delete e.valueResolved)}else if(e.internalActions.removeQueryResult.match(c)||e.internalActions.removeMutationResult.match(c)){const e=l[m];e&&(delete l[m],e.cacheEntryRemoved())}else if(e.util.resetApiState.match(c))for(const[e,t]of Object.entries(l))delete l[e],t.cacheEntryRemoved();return p};function f(t,r,i,a,o){const s=n.endpointDefinitions[t],u=null==s?void 0:s.onCacheEntryAdded;if(!u)return;let f={};const p=new Promise((e=>{f.cacheEntryRemoved=e})),m=Promise.race([new Promise((e=>{f.valueResolved=e})),p.then((()=>{throw Te}))]);m.catch((()=>{})),l[i]=f;const y=e.endpoints[t].select(s.type===A.query?r:i),h=a.dispatch(((e,t,n)=>n)),g=d(c({},a),{getCacheEntry:()=>y(a.getState()),requestId:o,extra:h,updateCachedData:s.type===A.query?n=>a.dispatch(e.util.updateQueryData(t,r,n)):void 0,cacheDataLoaded:m,cacheEntryRemoved:p}),v=u(r,g);Promise.resolve(v).catch((e=>{if(e!==Te)throw e}))}}};import{isPending as ke,isRejected as Ce,isFulfilled as Ie}from"@reduxjs/toolkit";var Pe=({api:e,context:t,queryThunk:n,mutationThunk:r})=>{const i=ke(n,r),a=Ce(n,r),o=Ie(n,r);return n=>{const r={};return s=>u=>{var l,f,p;const m=s(u);if(i(u)){const{requestId:i,arg:{endpointName:a,originalArgs:o}}=u.meta,s=t.endpointDefinitions[a],l=null==s?void 0:s.onQueryStarted;if(l){const t={},u=new Promise(((e,n)=>{t.resolve=e,t.reject=n}));u.catch((()=>{})),r[i]=t;const f=e.endpoints[a].select(s.type===A.query?o:i),p=n.dispatch(((e,t,n)=>n)),m=d(c({},n),{getCacheEntry:()=>f(n.getState()),requestId:i,extra:p,updateCachedData:s.type===A.query?t=>n.dispatch(e.util.updateQueryData(a,o,t)):void 0,queryFulfilled:u});l(o,m)}}else if(o(u)){const{requestId:e,baseQueryMeta:t}=u.meta;null==(l=r[e])||l.resolve({data:u.payload,meta:t}),delete r[e]}else if(a(u)){const{requestId:e,rejectedWithValue:t,baseQueryMeta:n}=u.meta;null==(p=r[e])||p.reject({error:null!=(f=u.payload)?f:u.error,isUnhandledError:!t,meta:n}),delete r[e]}return m}}},Qe=({api:e,context:{apiUid:t}})=>n=>{let r=!1;return i=>a=>{r||(r=!0,n.dispatch(e.internalActions.middlewareRegistered(t)));const o=i(a);return e.util.resetApiState.match(a)&&n.dispatch(e.internalActions.middlewareRegistered(t)),o}};function De(e,...t){Object.assign(e,...t)}import{enablePatches as Ne}from"immer";var Ke=Symbol(),Ee=()=>({name:Ke,init(t,{baseQuery:n,reducerPath:r,serializeQueryArgs:i,keepUnusedDataFor:a,refetchOnMountOrArgChange:o,refetchOnFocus:s,refetchOnReconnect:u},l){Ne();const p=e=>e;Object.assign(t,{reducerPath:r,endpoints:{},internalActions:{onOnline:C,onOffline:I,onFocus:x,onFocusLost:k},util:{}});const{queryThunk:m,mutationThunk:h,patchQueryData:g,updateQueryData:v,prefetch:b,buildMatchThunkActions:q}=function({reducerPath:t,baseQuery:n,context:{endpointDefinitions:r},serializeQueryArgs:i,api:a}){const o=async(e,{signal:t,rejectWithValue:i,fulfillWithValue:a,dispatch:o,getState:u,extra:c})=>{const d=r[e.endpointName];try{let r,i=X;const l={signal:t,dispatch:o,getState:u,extra:c,endpoint:e.endpointName,type:e.type,forced:"query"===e.type?s(e,u()):void 0};if(d.query?(r=await n(d.query(e.originalArgs),l,d.extraOptions),d.transformResponse&&(i=d.transformResponse)):r=await d.queryFn(e.originalArgs,l,d.extraOptions,(e=>n(e,l,d.extraOptions))),r.error)throw new j(r.error,r.meta);return a(await i(r.data,r.meta,e.originalArgs),{fulfilledTimeStamp:Date.now(),baseQueryMeta:r.meta})}catch(e){if(e instanceof j)return i(e.value,{baseQueryMeta:e.meta});throw console.error(e),e}};function s(e,n){var r,i,a,o;const s=null==(i=null==(r=n[t])?void 0:r.queries)?void 0:i[e.queryCacheKey],u=null==(a=n[t])?void 0:a.config.refetchOnMountOrArgChange,c=null==s?void 0:s.fulfilledTimeStamp,d=null!=(o=e.forceRefetch)?o:e.subscribe&&u;return!!d&&(!0===d||(Number(new Date)-Number(c))/1e3>=d)}function u(e){return t=>{var n,r;return(null==(r=null==(n=null==t?void 0:t.meta)?void 0:n.arg)?void 0:r.endpointName)===e}}return{queryThunk:Y(`${t}/executeQuery`,o,{getPendingMeta:()=>({startedTimeStamp:Date.now()}),condition(e,{getState:n}){var r,i;const a=n(),o=null==(i=null==(r=a[t])?void 0:r.queries)?void 0:i[e.queryCacheKey],u=null==o?void 0:o.fulfilledTimeStamp;return!("pending"===(null==o?void 0:o.status)||!s(e,a)&&u)},dispatchConditionRejection:!0}),mutationThunk:Y(`${t}/executeMutation`,o,{getPendingMeta:()=>({startedTimeStamp:Date.now()})}),prefetch:(e,t,n)=>(r,i)=>{const o=(e=>"force"in e)(n)&&n.force,s=(e=>"ifOlderThan"in e)(n)&&n.ifOlderThan,u=(n=!0)=>a.endpoints[e].initiate(t,{forceRefetch:n}),c=a.endpoints[e].select(t)(i());if(o)r(u());else if(s){const e=null==c?void 0:c.fulfilledTimeStamp;if(!e)return void r(u());(Number(new Date)-Number(new Date(e)))/1e3>=s&&r(u())}else r(u(!1))},updateQueryData:(t,n,r)=>(i,o)=>{const s=a.endpoints[t].select(n)(o());let u={patches:[],inversePatches:[],undo:()=>i(a.util.patchQueryData(t,n,u.inversePatches))};if(s.status===e.uninitialized)return u;if("data"in s)if(J(s.data)){const[,e,t]=G(s.data,r);u.patches.push(...e),u.inversePatches.push(...t)}else{const e=r(s.data);u.patches.push({op:"replace",path:[],value:e}),u.inversePatches.push({op:"replace",path:[],value:s.data})}return i(a.util.patchQueryData(t,n,u.patches)),u},patchQueryData:(e,t,n)=>o=>{o(a.internalActions.queryResultPatched({queryCacheKey:i({queryArgs:t,endpointDefinition:r[e],endpointName:e}),patches:n}))},buildMatchThunkActions:function(e,t){return{matchPending:U(H(e),u(t)),matchFulfilled:U(W(e),u(t)),matchRejected:U(B(e),u(t))}}}}({baseQuery:n,reducerPath:r,context:l,api:t,serializeQueryArgs:i}),{reducer:O,actions:w}=function({reducerPath:t,queryThunk:n,mutationThunk:r,context:{endpointDefinitions:i,apiUid:a,extractRehydrationInfo:o,hasRehydrationInfo:s},assertTagType:u,config:l}){const f=F(`${t}/resetApiState`),p=z({name:`${t}/queries`,initialState:ie,reducers:{removeQueryResult(e,{payload:{queryCacheKey:t}}){delete e[t]},queryResultPatched(e,{payload:{queryCacheKey:t,patches:n}}){te(e,t,(e=>{e.data=ee(e.data,n.concat())}))}},extraReducers(t){t.addCase(n.pending,((t,{meta:n,meta:{arg:r}})=>{var i;r.subscribe&&(null!=t[i=r.queryCacheKey]||(t[i]={status:e.uninitialized,endpointName:r.endpointName})),te(t,r.queryCacheKey,(t=>{t.status=e.pending,t.requestId=n.requestId,void 0!==r.originalArgs&&(t.originalArgs=r.originalArgs),t.startedTimeStamp=n.startedTimeStamp}))})).addCase(n.fulfilled,((t,{meta:n,payload:r})=>{te(t,n.arg.queryCacheKey,(t=>{var a;t.requestId===n.requestId&&(t.status=e.fulfilled,t.data=null==(a=i[n.arg.endpointName].structuralSharing)||a?y(t.data,r):r,delete t.error,t.fulfilledTimeStamp=n.fulfilledTimeStamp)}))})).addCase(n.rejected,((t,{meta:{condition:n,arg:r,requestId:i},error:a,payload:o})=>{te(t,r.queryCacheKey,(t=>{if(n);else{if(t.requestId!==i)return;t.status=e.rejected,t.error=null!=o?o:a}}))})).addMatcher(s,((t,n)=>{const{queries:r}=o(n);for(const[n,i]of Object.entries(r))(null==i?void 0:i.status)!==e.fulfilled&&(null==i?void 0:i.status)!==e.rejected||(t[n]=i)}))}}),m=z({name:`${t}/mutations`,initialState:ie,reducers:{removeMutationResult(e,{payload:t}){const n=ne(t);n in e&&delete e[n]}},extraReducers(t){t.addCase(r.pending,((t,{meta:n,meta:{requestId:r,arg:i,startedTimeStamp:a}})=>{i.track&&(t[ne(n)]={requestId:r,status:e.pending,endpointName:i.endpointName,startedTimeStamp:a})})).addCase(r.fulfilled,((t,{payload:n,meta:r})=>{r.arg.track&&re(t,r,(t=>{t.requestId===r.requestId&&(t.status=e.fulfilled,t.data=n,t.fulfilledTimeStamp=r.fulfilledTimeStamp)}))})).addCase(r.rejected,((t,{payload:n,error:r,meta:i})=>{i.arg.track&&re(t,i,(t=>{t.requestId===i.requestId&&(t.status=e.rejected,t.error=null!=n?n:r)}))})).addMatcher(s,((t,n)=>{const{mutations:r}=o(n);for(const[n,i]of Object.entries(r))(null==i?void 0:i.status)!==e.fulfilled&&(null==i?void 0:i.status)!==e.rejected||n===(null==i?void 0:i.requestId)||(t[n]=i)}))}}),h=z({name:`${t}/invalidation`,initialState:ie,reducers:{},extraReducers(e){e.addCase(p.actions.removeQueryResult,((e,{payload:{queryCacheKey:t}})=>{for(const n of Object.values(e))for(const e of Object.values(n)){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}})).addMatcher(s,((e,t)=>{var n,r,i,a;const{provided:s}=o(t);for(const[t,o]of Object.entries(s))for(const[s,u]of Object.entries(o)){const o=null!=(a=(r=null!=(n=e[t])?n:e[t]={})[i=s||"__internal_without_id"])?a:r[i]=[];for(const e of u)o.includes(e)||o.push(e)}})).addMatcher(_(L(n),$(n)),((e,t)=>{var n,r,a,o;const s=Z(t,"providesTags",i,u),{queryCacheKey:c}=t.meta.arg;for(const{type:t,id:i}of s){const s=null!=(o=(r=null!=(n=e[t])?n:e[t]={})[a=i||"__internal_without_id"])?o:r[a]=[];s.includes(c)||s.push(c)}}))}}),g=z({name:`${t}/subscriptions`,initialState:ie,reducers:{updateSubscriptionOptions(e,{payload:{queryCacheKey:t,requestId:n,options:r}}){var i;(null==(i=null==e?void 0:e[t])?void 0:i[n])&&(e[t][n]=r)},unsubscribeQueryResult(e,{payload:{queryCacheKey:t,requestId:n}}){e[t]&&delete e[t][n]}},extraReducers:e=>{e.addCase(p.actions.removeQueryResult,((e,{payload:{queryCacheKey:t}})=>{delete e[t]})).addCase(n.pending,((e,{meta:{arg:t,requestId:n}})=>{var r,i,a,o;if(t.subscribe){const s=null!=(i=e[r=t.queryCacheKey])?i:e[r]={};s[n]=null!=(o=null!=(a=t.subscriptionOptions)?a:s[n])?o:{}}})).addCase(n.rejected,((e,{meta:{condition:t,arg:n,requestId:r}})=>{var i,a,o,s;if(t&&n.subscribe){const t=null!=(a=e[i=n.queryCacheKey])?a:e[i]={};t[r]=null!=(s=null!=(o=n.subscriptionOptions)?o:t[r])?s:{}}})).addMatcher(s,(e=>c({},e)))}}),v=z({name:`${t}/config`,initialState:c({online:"undefined"==typeof navigator||void 0===navigator.onLine||navigator.onLine,focused:"undefined"==typeof document||"hidden"!==document.visibilityState,middlewareRegistered:!1},l),reducers:{middlewareRegistered(e,{payload:t}){e.middlewareRegistered="conflict"!==e.middlewareRegistered&&a===t||"conflict"}},extraReducers:e=>{e.addCase(C,(e=>{e.online=!0})).addCase(I,(e=>{e.online=!1})).addCase(x,(e=>{e.focused=!0})).addCase(k,(e=>{e.focused=!1})).addMatcher(s,(e=>c({},e)))}}),b=M({queries:p.reducer,mutations:m.reducer,provided:h.reducer,subscriptions:g.reducer,config:v.reducer});return{reducer:(e,t)=>b(f.match(t)?void 0:e,t),actions:d(c(c(c(c({},v.actions),p.actions),g.actions),m.actions),{unsubscribeMutationResult:m.actions.removeMutationResult,resetApiState:f})}}({context:l,queryThunk:m,mutationThunk:h,reducerPath:r,assertTagType:p,config:{refetchOnFocus:s,refetchOnReconnect:u,refetchOnMountOrArgChange:o,keepUnusedDataFor:a,reducerPath:r}});De(t.util,{patchQueryData:g,updateQueryData:v,prefetch:b,resetApiState:w.resetApiState}),De(t.internalActions,w),Object.defineProperty(t.util,"updateQueryResult",{get:()=>t.util.updateQueryData}),Object.defineProperty(t.util,"patchQueryResult",{get:()=>t.util.patchQueryData});const{middleware:R,actions:S}=function(e){const{reducerPath:t,queryThunk:n}=e,r={invalidateTags:ge(`${t}/invalidateTags`)},i=[Qe,ve,je,we,Re,xe,Pe].map((t=>t(d(c({},e),{refetchQuery:a}))));return{middleware:e=>n=>{const r=he(...i.map((t=>t(e))))(n);return i=>e.getState()[t]?r(i):n(i)},actions:r};function a(e,t,r={}){return n(c({type:"query",endpointName:e.endpointName,originalArgs:e.originalArgs,subscribe:!1,forceRefetch:!0,queryCacheKey:t},r))}}({reducerPath:r,context:l,queryThunk:m,mutationThunk:h,api:t,assertTagType:p});De(t.util,S),De(t,{reducer:O,middleware:R});const{buildQuerySelector:T,buildMutationSelector:P,selectInvalidatedBy:Q}=function({serializeQueryArgs:t,reducerPath:n}){return{buildQuerySelector:function(e,n){return a=>{const o=N(i,(r=>{var i,o;return null!=(o=a===ae||null==(i=null==r?void 0:r.queries)?void 0:i[t({queryArgs:a,endpointDefinition:n,endpointName:e})])?o:ue}));return N(o,r)}},buildMutationSelector:function(){return e=>{var t;let n;n="object"==typeof e?null!=(t=ne(e))?t:ae:e;const a=N(i,(e=>{var t,r;return null!=(r=n===ae||null==(t=null==e?void 0:e.mutations)?void 0:t[n])?r:ce}));return N(a,r)}},selectInvalidatedBy:function(e,t){var r;const i=e[n],a=new Set;for(const e of t.map(E)){const t=i.provided[e.type];if(!t)continue;let n=null!=(r=void 0!==e.id?t[e.id]:f(Object.values(t)))?r:[];for(const e of n)a.add(e)}return f(Array.from(a.values()).map((e=>{const t=i.queries[e];return t?[{queryCacheKey:e,endpointName:t.endpointName,originalArgs:t.originalArgs}]:[]})))}};function r(t){return c(c({},t),{status:n=t.status,isUninitialized:n===e.uninitialized,isLoading:n===e.pending,isSuccess:n===e.fulfilled,isError:n===e.rejected});var n}function i(e){return e[n]}}({serializeQueryArgs:i,reducerPath:r});De(t.util,{selectInvalidatedBy:Q});const{buildInitiateQuery:D,buildInitiateMutation:K,getRunningOperationPromises:V,getRunningOperationPromise:oe}=function({serializeQueryArgs:e,queryThunk:t,mutationThunk:n,api:r,context:i}){const a={},o={},{unsubscribeQueryResult:s,removeMutationResult:u,updateSubscriptionOptions:c}=r.internalActions;return{buildInitiateQuery:function(n,i){const o=(u,{subscribe:d=!0,forceRefetch:l,subscriptionOptions:f}={})=>(p,m)=>{const y=e({queryArgs:u,endpointDefinition:i,endpointName:n}),h=t({type:"query",subscribe:d,forceRefetch:l,subscriptionOptions:f,endpointName:n,originalArgs:u,queryCacheKey:y}),g=p(h),{requestId:v,abort:b}=g,q=Object.assign(Promise.all([a[y],g]).then((()=>r.endpoints[n].select(u)(m()))),{arg:u,requestId:v,subscriptionOptions:f,queryCacheKey:y,abort:b,async unwrap(){const e=await q;if(e.isError)throw e.error;return e.data},refetch(){p(o(u,{subscribe:!1,forceRefetch:!0}))},unsubscribe(){d&&p(s({queryCacheKey:y,requestId:v}))},updateSubscriptionOptions(e){q.subscriptionOptions=e,p(c({endpointName:n,requestId:v,queryCacheKey:y,options:e}))}});return a[y]||(a[y]=q,q.then((()=>{delete a[y]}))),q};return o},buildInitiateMutation:function(e){return(t,{track:r=!0,fixedCacheKey:i}={})=>(a,s)=>{const c=n({type:"mutation",endpointName:e,originalArgs:t,track:r,fixedCacheKey:i}),d=a(c),{requestId:l,abort:f,unwrap:p}=d,m=d.unwrap().then((e=>({data:e}))).catch((e=>({error:e}))),y=()=>{a(u({requestId:l,fixedCacheKey:i}))},h=Object.assign(m,{arg:d.arg,requestId:l,abort:f,unwrap:p,unsubscribe:y,reset:y});return o[l]=h,h.then((()=>{delete o[l]})),i&&(o[i]=h,h.then((()=>{o[i]===h&&delete o[i]}))),h}},getRunningOperationPromises:function(){return[...Object.values(a),...Object.values(o)].filter((e=>!!e))},getRunningOperationPromise:function(t,n){const r=i.endpointDefinitions[t];if(r.type===A.query){const i=e({queryArgs:n,endpointDefinition:r,endpointName:t});return a[i]}return o[n]}}}({queryThunk:m,mutationThunk:h,api:t,serializeQueryArgs:i,context:l});return De(t.util,{getRunningOperationPromises:V,getRunningOperationPromise:oe}),{name:Ke,injectEndpoint(e,n){var r;const i=t;null!=(r=i.endpoints)[e]||(r[e]={}),n.type===A.query?De(i.endpoints[e],{select:T(e,n),initiate:D(e,n)},q(m,e)):n.type===A.mutation&&De(i.endpoints[e],{select:P(),initiate:K(e)},q(h,e))}}}}),Me=me(Ee());export{e as QueryStatus,me as buildCreateApi,y as copyWithStructuralSharing,Ee as coreModule,Me as createApi,ye as fakeBaseQuery,O as fetchBaseQuery,R as retry,Q as setupListeners,oe as skipSelector,ae as skipToken};
//# sourceMappingURL=rtk-query.modern.production.min.js.map