"""
Indicates exactly one field must be supplied and this field must not be `null`.
"""
directive @oneOf on INPUT_OBJECT

type Season {
  number: Int!
  name: String!
  startTime: String!
  endTime: String!
  isActive: Boolean!
}

type UserStats {
  rank: Int!
  address: String!
  points: Int!
  volumeUsd: Float!
  season: Season!
}

type LeaderboardEntry {
  rank: Int!
  address: String!
  points: Int!
  volumeUsd: Float!
}

type PageInfo {
  currentPage: Int!
  pageSize: Int!
  totalPages: Int!
  totalCount: Int!
  hasNextPage: Boolean!
  hasPreviousPage: Boolean!
}

type Leaderboard {
  entries: [LeaderboardEntry!]!
  pageInfo: PageInfo!
  season: Season!
}

type ReferralInvites {
  referredUsers: [ReferredUser!]!
  pageInfo: PageInfo!
  season: Season!
}

type ReferredUser {
  address: String!
  volumeUsd: Float!
  referralPoints: Int!
}

type ReferrerStats {
  rank: Int!
  address: String!
  totalReferralVolumeUsd: Float!
  totalReferralPoints: Int!
  season: Season!
}

type ChainStats {
  chainId: Int!
  chainName: String!
  volume: Float!
  fees: Float!
  swapCount: Int!
  userCount: Int!
}

type Query {
  """
  Get stats for a specific user address.
  If seasons is not provided, defaults to the current active season.
  """
  userStats(address: String!, seasons: [Int!]): [UserStats!]!

  """
  Get paginated leaderboard.
  - season: season number (defaults to current active season)
  - page: page number (defaults to 1)
  - pageSize: 25 or 50 (defaults to 25)
  """
  leaderboard(season: Int, page: Int, pageSize: Int): Leaderboard!

  """Get all seasons"""
  seasons: [Season!]!

  """Get current active season"""
  currentSeason: Season

  """
  Get stats per chain for a season.
  Returns volume, fees, swap count, and unique user count grouped by chain.
  """
  chainStats(season: Int): [ChainStats!]!

  """
  Get paginated referral invites for a referrer address.
  - referrerAddress: address of the referrer
  - season: season number (defaults to current active season)
  - page: page number (defaults to 1)
  - pageSize: 25 or 50 (defaults to 25)
  """
  referralInvites(referrerAddress: String!, season: Int, page: Int, pageSize: Int): ReferralInvites!

  """
  Get stats for a specific user address.
  If seasons is not provided, defaults to the current active season.
  """
  userReferralStats(address: String!, seasons: [Int!]): [ReferrerStats!]!
}

type Mutation {
  """
  Accept a referral code.
  Returns success status and message.
  """
  acceptReferral(referralCode: String!, message: String!, signature: String!, userAddress: String!, chainId: Int!): ReferralResult!
}

type ReferralResult {
  success: Boolean!
  message: String!
}