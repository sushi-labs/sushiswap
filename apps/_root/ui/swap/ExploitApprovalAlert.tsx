import { FC } from 'react'
import Button from '@sushiswap/ui/future/components/button/Button'
import { XMarkIcon } from '@heroicons/react/24/outline'
import { IconButton } from '@sushiswap/ui/future/components/IconButton'
import { useLocalStorage } from '@sushiswap/hooks'
import { useAccount } from '@sushiswap/wagmi'

export const ExploitApprovalAlert: FC = () => {
  const { address } = useAccount()
  const [value, setValue] = useLocalStorage('showRP2ExploitAlert', true)

  if (!address || !value) return <></>

  return (
    <div className="flex justify-center items-center bg-yellow/20 gap-6 md:gap-3 dark:text-yellow text-yellow-900 p-3 pr-14 font-semibold">
      <div>There was a vulnerability found in our RouteProcessor2 contract. Please check if you are affected.</div>
      <Button as="a" href="/swap/approvals" size="sm" color="yellow" className="whitespace-nowrap">
        Check Approvals
      </Button>
      <div className="absolute right-4">
        <IconButton
          icon={XMarkIcon}
          iconProps={{ width: 20, height: 20 }}
          onClick={() => setValue(false)}
          className="absolute"
        />
      </div>
    </div>
  )
}
